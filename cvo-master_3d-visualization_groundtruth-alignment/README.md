# CVO Method

Based on code written by MaaniGhaffari: https://github.com/MaaniGhaffari/cvo-rgbd

Tested with: Matlab 2018a

Related Paper: 
Maani Ghaffari, William Clark, Anthony Bloch, Ryan M. Eustice, and Jessy W. Grizzle. "Continuous Direct Sparse Visual Odometry from RGB-D Images." https://arxiv.org/abs/1904.02266

## Required uncommon MATLAB package:

- Computer Vision Toolbox

## Procedure

### CVO
1. Select the proper dataset_name in run_cvo_main.m
2. Run run_cvo_main.m
- Generates variable transform_accum_dict that should be saved a .mat file (ours is transform_accum_dict_new_edge.mat)

### Align Ground Truth
1. In allign_ground_truth.m, select the proper .mat files to load that contains frame-to-frame transformations (line 18)
2. Select the proper assG_rgb_XXX.txt file as your fileID (line 25)
3. Run allign_ground_truth.m
- Outputs the transformation matrices aligned with ground truth as an output (...align_gt.mat)

### 3D Visualization
1. In transform_test_visual.m, load the proper frame-to-frame transformation (line 6)
2. Select the dataset (line 20)
3. Run transform_test_visual.m
- Outputs the 3D visualization animation of the transformed point clouds

## Folder Structure

cvo-master_3d-visualization_groundtruth-alignment/

-->@rkhs_se3_registration/: Maani Ghaffari’s CVO class from https://github.com/MaaniGhaffari/cvo-rgbd

--> cvo_desk, cvo_xyz, dvo_desk, dvo_xyz, open3d_desk, open3d_xyz folders
- Contain the related frame to frame transformation matrices and the related accumulated matrices, which are used for “align_ground_truth.m” and “transform_test_visual.m”, respectively.

--> rgbd_tum/
- Contains the freiburg1_desk and freiburg1_xyz’s RGB image, depth image, full point cloud files (first 100 images) without extracting edges

--> assG_rgb_desk2.txt & assG_rgb_xyz2.txt
- Contain aligned ground truth timesteps, ground truth quaternion and related point cloud files’ timesteps

--> align_ground_truth.m
- Feed in the frame to frame transformation matrices (relative matrices) and the related assG_rgb_XXX.txt files
- Get the transformation matrices aligned with ground truth as an output

--> run_cvo_main.m
- Reads point cloud files then outputs the relative transformation matrices
- The dataset path should be modified at the beginning of the code

--> transform_test_visual.m
- Reads point cloud files and the related relative transformation matrices generated by different method, then it will output the 3D visualization animation
